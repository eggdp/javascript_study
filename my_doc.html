<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>TODO List</h1>
    <input id="data" onkeyup="enterData(event)" />

    <ul id="container"></ul>
  </body>

  <script>
    let array1 = ["스터디 하기", "제로콜라 마시기", "이클립스 먹기"];

    function setLiTag() {
      const containerDiv = window.document.getElementById("container");

      while (containerDiv.hasChildNodes()) {
        containerDiv.removeChild(containerDiv.lastChild);
      }

      // array1.forEach(value) =>{
      //   const tempLi=document.createElement("li");

      //   const tempSpan=document.createElement("span");
      //   tempSpan.innerHTML =value;

      //   const tempSpan2=document.createElement("span");
      //   tempSpan2.style.color="red";
      //   tempSpan2.style.cursor="pointer";
      //   tempSpan2.onclick = () => deleteItem(value);
      //   tempSpan2.innerHTML = " X";

      //   tempLi.appendChild(tempSpan);
      //   tempLi.appendChild(tempSpan2);

      //   containerDiv.appendChild(tempLi);
      // }

      array1.forEach((value) => {
        containerDiv.insertAdjacentHTML(
          `beforeend`,
          `<li>
                    <span>${value}</span>
                    <span style="color:red;cursor:pointer" onclick="deleteItem('${value}')"> X</span>

                </li>`
        );
      });
    }

    //아이템 추가 로직
    function addItem(itemName) {
      array1.push(itemName);

      setLiTag();
    }

    //아이템 삭제 로직
    function deleteItem(itemName) {
      const idx = array1.indexOf(itemName);
      array1.splice(idx, 1);
      setLiTag();
    }

    function enterData(event) {
      if (event.keyCode === 13) {
        const dataInput = document.getElementById("data");
        if (
          dataInput.value != null &&
          dataInput.value != "" &&
          !array1.includes(dataInput.value)
        ) {
          addItem(dataInput.value);
          dataInput.value = "";
        } else {
          alert(`이미 등록되어 있습니다.`);
        }
      }
    }
    setLiTag();
  </script>
</html>
